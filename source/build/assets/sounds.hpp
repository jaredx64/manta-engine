#pragma once

#include <core/types.hpp>
#include <core/list.hpp>
#include <core/buffer.hpp>
#include <core/string.hpp>

#include <build/objloader.hpp>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

using SoundID = u32;
#define SOUNDID_MAX ( U32_MAX )

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

struct Sound
{
	String path;
	String name;

	bool streamed;
	bool compressed;
	u8 numChannels;

	byte *sampleData;
	usize sampleDataSize;
	usize sampleOffsetBytes;
	usize sampleCountBytes;
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

struct Sounds
{
	SoundID make_new( const Sound &voice );
	void gather( const char *path, const bool recurse = true );
	void load( const char *path );
	void write();

	Sound &operator[]( const u32 soundID ) { return sounds[soundID]; }

	List<Sound> sounds;
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////